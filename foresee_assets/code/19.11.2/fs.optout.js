/***************************************
 * @preserve
 * Copyright (c) 2019 Verint Systems, Inc. All rights reserved.
 * ForeSee Web SDK: Opt-Out
 * Version: 19.11.2
 * Built: November 07, 2019, 12:47:06 CST
 ***************************************/
_fsDefine(["fs",_fsNormalizeUrl("$fs.utils.js"),"exports"],function(t,e,n){var o=function(){function n(t){this.browser=t,this.stg=e.getGeneralStorage(t)}var o=n.prototype;return o.loadResources=function(n){var o=this;this.stg.ready.subscribe(function(){var r=t.makeURI("$templates/trigger/admintools/main.css"),s=t.makeURI("$templates/trigger/admintools/optout.html"),a=!1,u=!1,l=function(){if(a&&u&&n)return n()};e.loadCSS(r,function(){a=!0,l()},null,o.browser),new e.TemplateFetcher({success:function(t){u=!0,o.template=t,l()}}).get(s)},!0,!0)},o._applyOptOutState=function(){var e=this;this.stg.ready.subscribe(function(n){var o=document,r=e.stg.get("optout");if(t.isDefined(r)&&"false"!=r){o.querySelector(".acsOptOutControls").style.display="none",o.querySelector(".acsOptInControls").style.display="block";var s=new Date;s.setTime(n._data.keys.optout.x);var a=s.getDate(),u=s.getMonth(),l=s.getFullYear();o.getElementById("acswhenexpires").innerHTML=["January","February","March","April","May","June","July","August","September","October","November","December"][u]+" "+a+", "+l}else o.querySelector(".acsOptOutControls").style.display="block",o.querySelector(".acsOptInControls").style.display="none"},!0,!0)},o.render=function(){var n=this;document.title="ForeSee Opt-Out Tool";var o=t.ext(this.browser,{siteLogo:t.globalConfig.staticUrl+"/logos/foresee/foresee.svg"}),r=this.template(o);document.body.innerHTML=r;var s=document.getElementById("acsOptOutButton"),a=document.getElementById("acsOptInButton");e.Bind(s,"click",function(t){e.preventDefault(t),n.stg.set("optout",!0,31536e6,!0),n._applyOptOutState()}),e.Bind(a,"click",function(t){e.preventDefault(t),n.stg.erase("optout",null,!0),n._applyOptOutState()}),this._applyOptOutState()},n}();function r(){var t=new e.Browser;t.ready.subscribe(function(){var e=new o(t);e.loadResources(function(){e.render()})},!0,!0)}return n.startup=function(){t.domReady(r)},n});
