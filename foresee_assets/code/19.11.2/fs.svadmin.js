/***************************************
 * @preserve
 * Copyright (c) 2019 Verint Systems, Inc. All rights reserved.
 * ForeSee Web SDK: Admin Panel
 * Version: 19.11.2
 * Built: November 07, 2019, 12:47:06 CST
 ***************************************/
_fsDefine(["fs",_fsNormalizeUrl("$fs.utils.js"),"exports"],function(e,t,r){var n=function(){function r(e){this.browser=e,this.stg=t.getGeneralStorage(e)}var n=r.prototype;return n.loadResources=function(r){var n=this;this.stg.ready.subscribe(function(){var o=e.makeURI("$templates/trigger/admintools/main.css"),i=e.makeURI("$templates/trigger/admintools/admin.html"),s=!1,a=!1,l=function(){if(s&&a&&r)return r()};t.loadCSS(o,function(){s=!0,l()},null,n.browser),new t.TemplateFetcher({success:function(e){a=!0,n.template=e,l()}}).get(i)},!0,!0)},n._applyValues=function(){var e,t=this,r={sp:{},lf:{}},n=document.querySelectorAll(".acsSPOverride"),o=document.querySelectorAll(".acsLFOverride");for(e=0;e<n.length;e++){var i=n[e].id,s=n[e].value,a=i.replace("_spovr_","");s&&s.length>0&&(r.sp[a]={reg:parseInt(s,10),outreplaypool:parseInt(s,10)})}for(e=0;e<o.length;e++){var l=o[e].id,c=o[e].value,u=l.replace("_lfovr_","");c&&c.length>0&&(r.lf[u]=parseInt(c,10))}var d=!1;document.getElementById("acsOverridePooling").checked&&(d=!0),r.pooloverride=d,this.stg.set("ovr",JSON.stringify(r),null,!0,function(){t.writeMessage("Override saved.")})},n.writeMessage=function(e){var t=document.getElementById("fsMessage");clearTimeout(this.wmTimeout),t&&(t.innerHTML=e||"",this.wmTimeout=setTimeout(function(){t.innerHTML=""},3e3))},n.render=function(){var r=this;document.title="ForeSee Survey Administration Tool";var n=e.ext({},this.browser,{siteLogo:e.globalConfig.staticUrl+"/logos/foresee/foresee.svg"},{defs:e.getProductConfig("trigger").surveydefs},!1),o=this.template(n);document.body.innerHTML=o;var i=document.getElementById("acsSetValues");i&&t.Bind(i,"click",function(e){t.preventDefault(e),r.stg.reset(function(){r._applyValues()},null,!0)});var s=document.getElementById("acsClearValues");s&&t.Bind(s,"click",function(e){t.preventDefault(e),r.stg.reset(function(){r.writeMessage("State cleared.")},function(){r.writeMessage("Failed to clear state.")});for(var n=document.querySelectorAll(".acsSPOverride, .acsLFOverride"),o=0;o<n.length;o++)n[o].value="";document.getElementById("acsOverridePooling").checked=!1});var a=document.getElementById("acsReturnToSite");a&&t.Bind(a,"click",function(e){t.preventDefault(e);var r=window.location.href.toString().replace(/[#&]fscommand=\w+/g,"");window.location=r,window.location.reload(),window.location=r});var l=this.stg.get("ovr");if(l){for(var c in l=JSON.parse(l),document.getElementById("acsOverridePooling").checked=l.pooloverride,l.sp)try{document.getElementById("_spovr_"+c).value=l.sp[c].reg}catch(d){}for(var u in l.lf)try{document.getElementById("_lfovr_"+u).value=l.lf[u]}catch(d){}}},r}();return r.startup=function(){var r=e.getProductConfig("trigger");if(r&&r.surveydefs)for(var o=0;o<r.surveydefs.length;o++)e.isString(r.surveydefs[o])&&(r.surveydefs[o]=t.compile(t.b64DecodeUnicode(r.surveydefs[o])));e.domReady(function(){var e=new t.Browser;e.ready.subscribe(function(){var t=new n(e);t.loadResources(function(){t.render()})},!0,!0)})},r});
