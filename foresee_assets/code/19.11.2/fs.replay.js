/***************************************
 * @preserve
 * Copyright (c) 2019 Verint Systems, Inc. All rights reserved.
 * ForeSee Web SDK: Replay JavaScript
 * Version: 19.11.2
 * Built: November 07, 2019, 12:47:06 CST
 ***************************************/
_fsDefine(["fs",_fsNormalizeUrl("$fs.utils.js")],function(e,t){var i={UNKNOWN:0,DOM_SERIALIZE:1,FRAME_SIZE:3,FRAME_SCROLL:4,MOUSE_MOVE:5,WINDOW_MOUSEOUT_MOUSEENTER:6,INPUT_SERIALIZE:7,FOCUS_BLUR:8,KEY_PRESS:9,CARET_INFO:10,VALUE_CHANGED:11,ATTR_MODIFIED:13,JAVASCRIPT_ERROR:14,MOUSE_CLICK:15,MOUSE_DOWN:16,MOUSE_UP:17,PAGE_MARKER:18,DOC_SIZE:19,SCROLL_EL:20,NOT_RECORDED:22,CSS_SERIALIZE:23,ORIENTATION:24,ZOOM:25,TOUCH:26,SKIPTIME:27,INCOMPLETE_INPUT_CAPTURE:28,ORIENTATION_CHANGE:29,CUSTOM:30,CUSTOM_ERROR:31,PAGE_VISIBLE:32,HEARTBEAT:33,NODE_ADDED:34,NODE_REMOVED:35,INPUT_RESIZE:36,CHAR_DATA:37,DOM_MODIFICATIONS:38,NODE_MOVED:39,PAGE_ERROR:40,ASSET_ERROR:41},n=function(){function e(){this.onProgress=new t.FSEvent,this.failedCSSLoad=!1}var n=e.prototype;return n.preloadAll=function(e){var t=this,i=Date.now();console.log("Starting asset preload...");var n=[];e.forEach(function(e){n=n.concat(t.domScan(e.initialDOM,e.events))});var s=new Set;n=n.filter(function(e){return!s.has(e.url)&&(s.add(e.url),!0)});var r=this.dedupeList(n.filter(this.isStylesheet)).filter(this.hasNoDeviceMediaQuery);return this.fetchCSS(r,n).then(function(){return n=t.dedupeList(n),console.log("Complete asset list:",n),n=n.filter(function(e){return"css-url"!==e.key&&t.hasNoDeviceMediaQuery(e)}),console.log("Preloading",n.length,"assets:",n),t.addPreloadLinks(n).then(function(){console.log("Asset preload finished in",Date.now()-i,"ms"),t.onProgress.unsubscribeAll()})})},n.fetchCSS=function(t,i){var n=this;return console.log("Fetching "+t.length+" css assets..."),Promise.all(t.map(function(t){return fetch(t.url,{cache:"force-cache"}).then(function(s){return s.ok?s.text().then(function(e){var t=[];n.cssScan(e,t,"css-url");var s=(t=t.filter(function(e){return i.indexOf(e)<0&&(i.push(e),!0)})).filter(function(e){return"@import"===e.key});if(s.length>0)return n.fetchCSS(s,i)}):(t.failed||(n.failedCSSLoad=!0,console.error("FATAL: stylesheet preload failed: "+e.originalUrl(t.url),t)),null)})}))},n.addPreloadLinks=function(t){var i=this;return t&&t.length?new Promise(function(n){var s=t.length;t.forEach(function(r){var o;if(i.isStylesheet(r)?o="style":i.isImage(r)?o="image":"@font-face"===r.key&&(o="font"),!o)return"href"===r.key&&r.node&&"LINK"===r.node.n||console.warn("Unable to determine type of this asset so not preloading it:",r),void s--;var a,d=document.createElement("link"),h=setTimeout(function(){console.error("FATAL Timed out preloading: "+e.originalUrl(r.url),r),a()},18e4),l=function(){i.isImage(r)?"css-url"!==r.key&&console.warn("Unable to preload: "+e.originalUrl(r.url),r):console.error("Error preloading: "+e.originalUrl(r.url),r),a()};a=function(){d.removeEventListener("load",a,!1),d.removeEventListener("error",l,!1),clearTimeout(h),s--,i.onProgress.fire(100*(t.length-s)/t.length),s<=0&&n()},d.addEventListener("load",a,!1),d.addEventListener("error",l,!1),d.setAttribute("rel","preload"),"font"===o&&d.setAttribute("crossorigin","anonymous"),d.setAttribute("as",o),d.setAttribute("href",r.url),document.head.appendChild(d)})}):Promise.resolve()},n.cssScan=function(e,t,i){var n=(e.match(/url\s*\(\s*['"]?\/replay\/proxy\?[^)]+\)/g)||[]).map(function(e){return"/replay/proxy"+e.split("/replay/proxy")[1].replace(/['"]?\s*\)$/,"")});(e.match(/@import\s*[^;]+;/g)||[]).forEach(function(e){var i=e.match(/(\/replay\/proxy\?[^"')]+)["')]/);if(i){var s=i[1];n=n.filter(function(e){return e!==s}),t.push({url:s,key:"@import"})}}),(e.match(/@font-face\s*{[^}]+}/g)||[]).forEach(function(e){var i=(e.match(/url\s*\(\s*['"]?\/replay\/proxy\?[^)]+\)/g)||[]).map(function(e){return"/replay/proxy"+e.split("/replay/proxy")[1].replace(/['"]?\s*\)$/,"")});n=n.filter(function(e){return i.indexOf(e)<0});var s=e.match(/url\s*\(\s*['"]?(\/replay\/proxy\?[^)'"]+)['"]?\s*\)\s*format\(['"](woff2|woff|truetype)['"]\)/);s||(s=[0,i[0]]),s[1]&&t.push({url:s[1],key:"@font-face"})}),n.forEach(function(e){t.push({url:e,key:i})})},n.domScan=function(e,t){var n=this,s=this;function r(e,t){if(e.a){for(var i in e.a)e.a[i]&&"string"==typeof e.a[i]&&0===e.a[i].indexOf("/replay/proxy?")&&t.push({url:e.a[i],key:i,node:e});e.a.style&&s.cssScan(e.a.style,t,"style-url")}if("STYLE"===e.n&&e.c){var n=e.c.map(function(e){return e.v||""}).join("");s.cssScan(n,t,s.hasNoDeviceMediaQuery(e)?"css-url":"style-url")}if(e.c)for(var o=0;o<e.c.length;o++)r(e.c[o],t)}var o=[];return e&&r(e,o),t.forEach(function(e){if(e.e===i.PAGE_MARKER&&e.d.doc)r(e.d.doc,o);else if(e.e===i.DOM_MODIFICATIONS)for(var t=0;t<e.d.length;t++){var s=e.d[t];if(s.e===i.NODE_ADDED)r(s.d.tree,o);else if(s.e===i.ATTR_MODIFIED)if("style"===s.d.attr&&s.d.val)n.cssScan(s.d.val,o,"style-url");else if(s.d.val&&0===s.d.val.indexOf("/replay/proxy?")){var a={};s.d.r&&(a.rel=s.d.r),a[s.d.attr]=s.d.val,o.push({url:s.d.val,key:s.d.attr,node:{id:s.d.id,n:s.d.tn,a:a}})}}else if(e.e===i.ASSET_ERROR&&e.d.a){var d=e.d.a.src||e.d.a.href||e.d.a.srcset,h=encodeURIComponent(btoa(d));o.forEach(function(e){(e.url.indexOf(h)>-1||e.url.indexOf(d)>-1)&&(e.failed=!0)})}}),o},n.dedupeList=function(e){var t=new Set;return e.filter(function(e){return!t.has(e.url)&&(t.add(e.url),!0)})},n.isStylesheet=function(e){return"@import"===e.key||"href"===e.key&&"LINK"===e.node.n&&e.node.a&&"stylesheet"===e.node.a.rel},n.isImage=function(e){return"css-url"===e.key||"style-url"===e.key||"src"===e.key&&"IMG"===e.node.n||"srcset"===e.key&&"SOURCE"===e.node.n||"src"===e.key&&"INPUT"===e.node.n||"src"===e.key&&!e.node.n},n.hasNoDeviceMediaQuery=function(e){var t=e.node;if(!t)return!0;if(!t.a)return!0;if(!t.a.media)return!0;var i=t.a.media;return i.indexOf("width")<0&&i.indexOf("height")<0},e.originalUrl=function(e){try{var t=e.split("?")[1].split("&"),i=t.find(function(e){return 0===e.indexOf("url=")}).split("=")[1],n=t.find(function(e){return 0===e.indexOf("context=")}).split("=")[1],s=atob(decodeURIComponent(i)),r=atob(decodeURIComponent(n));return new URL(s,r).href}catch(o){return e}},e}(),s={_animations:[],_clearInactiveAnimations:function(){for(var e=0;e<this._animations.length;e++)!0===this._animations[e].finished&&this._animations.splice(e--,1)},TWEENS:{EASE_IN:function(e,t,i,n){return i*(e/=n)*e+t},EASE_OUT:function(e,t,i,n){return-i*(e/=n)*(e-2)+t},EASE_IN_OUT:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t}}},r=function(){function i(t){var i={tween:s.TWEENS.EASE_IN_OUT,frameCallback:function(){},singleton:{},duration:2e3,frameTime:30,finished:function(){}};this.options=e.ext(i,t,!1),this.finished=!1,this.paused=!1,this.options.singleton&&(this.options.singleton._animation&&this.options.singleton._animation.stop(),this.options.singleton._animation=this),s._clearInactiveAnimations(),s._animations[s._animations.length]=this}var n=i.prototype;return n.go=function(){var e;this.finished=!1,this.startTime=t.now(),this.animInterval=setInterval((e=this,function(){e._anim()}),this.options.frameTime)},n.stop=function(){this.finished=!0,clearInterval(this.animInterval),s._clearInactiveAnimations(),this.options.finished&&this.options.finished.call(this)},n.pause=function(){this.paused=!0,this.pauseTime=t.now(),clearInterval(this.animInterval)},n.resume=function(){var e;!0===this.paused&&(this.paused=!1,this.startTime+=t.now()-this.paseTime,this.animInterval=setInterval((e=this,function(){e._anim()}),this.options.frameTime))},n._anim=function(){var e=t.now()-this.startTime;e>this.options.duration&&(e=this.options.duration);var i=this.options.tween.call(this,e,0,1,this.options.duration);isNaN(i)&&(i=1),i>1?i=1:i<0&&(i=0),this.options.frameCallback.call(this.options.singleton,i,this.options),(i>=1||e>=this.options.duration)&&this.stop()},i}(),o={playbackFrameBorder:2,overlayShadeFadeTime:0,overlayShadeSkipTime:1500};o.pathFSLogo=e.makeAssetURI("/fslogo.svg"),o.data=["body {","  background-color: #777;","  padding: 0;","  margin: 0;","  width: 100%;","  height: 100vh;","  display: flex;","  justify-content: center;","  align-items: center;","  overflow: hidden;","}","","/************"," * iframe"," ************/","","iframe#playback {","  border: ",o.playbackFrameBorder+"px solid #333;","  background-color: #fff;","  box-shadow: 10px 10px 10px #555;","}","","/************"," * UI"," ************/","",".overlay {","  z-index: 901;","  position: absolute;","}","",".overlay>div>* {","  transition: opacity ",Math.round(o.overlayShadeFadeTime)+"ms ease-in;","}","",".overlay .hidden {","  opacity: 0;","}","",".overlay .center {","  position: absolute;","  top: 50%;","  left: 50%;","  transform: translate(-50%, -50%);","}","","#shade {","  width: 100%;","  height: 100%;","  background-image: url('"+o.pathFSLogo+"');","  background-color: #fff;","  background-repeat: no-repeat;","  background-position: 50% 50%;","  background-size: 30%;","  filter: grayscale(1) brightness(2.5) invert(1);","}","","#shade.pageEnd {","  filter: grayscale(1) brightness(2.5);","}","","#progress {","  height: 5%;","  background-color: #444;","  position: relative;","  top: 90%;","}","","#counter {","  width: 100%;","  height: 100%;","  background-color: #000d;","  color: #fff;","}","","#counter #graph {","  position: absolute;","  width: 16em;","  top: 50%;","  left: 50%;","  transform: translate(-50%, -50%);","  z-index: -1;","}","","#counter #graph circle#c {","  stroke: #7db1ef95;","  cx: 0.5;","  cy: 0.5;","  r: 0.25;","  fill: none;","  stroke-width: 0.5px;","  stroke-dashoffset: 1.57;","  transition: stroke-dashoffset ",Math.round(o.overlayShadeSkipTime)+"ms linear;","  stroke-dasharray: 1.57;","  transform: translate(0%, 100%) rotate(-90deg);","}","","#counter #caption{","  position: absolute;","  top: 50%;","  left: 50%;","  transform: translate(-50%, -50%);","  z-index: -1;",'  font-family: "Helvetica Neue", "Liberation Sans", sans-serif;',"  font-size: 32pt;","}"].join("\n");var a={x:4,y:2},d=40,h=40,l="fsrMouseImageIcon",c="data:image/png;base64,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",u="data:image/png;base64,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",m={x:25,y:25},p=50,f=50,v="fsrMouseClickImageIcon",y="data:image/png;base64,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",g={x:25,y:25},w=50,E=50,b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABKRJREFUaAXtWklrFEEU/qoTjUsEl2jwIO6aiyI5eBBBFAXPCkEIbiCC4I+YPyGCCC4QFMGcBYPLxYNeRBGicYkniTuouMUu33udTlVneqZfzWQmE/HB0NXdr159X1XX8t4b4L+0Vg+YaYNz7Vobfu9ajd/YQDaXA2YZDObTdW7Shv0Fi++A/UD37zAHzzHn7mv09f2ZDgz1ESndbseans1A1ANrNhLIeWGgzA8YOwLEwxgdforS7vGw+k67NiLWGlx+uwWx3UM9vtiZq6dkPyMyt3BkxWMYY0MthRMZGFuH8Wgf4nhlaGMq/Sh6g/b4Jvq7X6r0J5T0REqlCGtO7aXvfEdIAzXrGtzD6NkhlEqxxoaOyIVX82A6D8LGNA+aKCYagf16HcfX/ihqtZjIwOslGJ/fT/Ohq8hYQ95H5j3avw+gf/Wnavajai/BIzGTJBgcdyBjYCxVpK3iO54TS3b2wdpVFXWa9cJiAUxHN7YtfII7d3JXtMojIhO7yXOiWsfw/GRMFSSfyMWx9U1bnSoAy33MKyYv/znSXvZMNrv3tMyqVr2y6oiiRfRd99BGyTv9UvotSpTMF3r2ke5HaOMbpn2I7msQ3sOsPTd10yxftS6NbUWMA8FNmKiTGthNYLcR2PyRnjRqqJfsQwJzmzrs6+RjbSHCII52P/LVsw3y2UmOHb6KomyiTUTiNGn2FpNge0K0V+pw3VBhjIzVkywROQAGnp2M2U6ADpHNDs+uttghddlGkBBGweoqZYnwKTZEZCSwn6qUf6J6O4YWlv0IHpksVkeE/Qk5iisRJHOC51I9JNLGiIw9QGQ60weFV8bKmCfEEWGnKMSfkIld0+eUtj31yp8ZLRZaId9HMCf6HhHx7HRWeImV1UmnrteiFU9sK2sk3qgoOyLinioNyD5RtMQqbWXUyKbYzjysdkMudSIeEfKx1cKbXaMkxLbD7IhIoEALjnfsRkmAbQ+zIzIZ7dAATI8dGt1QnRDbaYSGwh+hzbSqvkeE4k5q4QNgoyTEtsPsiEjwTAuOT7GNkgDbHmZHJIkAKtFxUK1REmJbopYCxCNCYUytsD8BPopPt5BNsa22O4nZEeFYrFbEKSJ/YtqFbIY4XB5mjwgFlEGxWK2wUwT81Kor9H6Ko6VQTFQIKwfBJ8QR4ai4BJTTVwVX9uyMGSSt3KhGQe2pr63YCvEWGasXyXdExDRFxUPExs/oEH+DqtRDhkiQDbYVJFmsWSIc2gdFxUPE2vvUm1epSi2fGX9OV+n4fj+kScEoWF2tcqdolgYfyokk4aCTNacNGh0O4rTDka6ycFAmEiEDxUmWi2NDVD7sBi6glCyfD2j46ecLT6OJqRTXMaU4d5KTCMrOkbTdY90vaALeS29b5sqYKiSA8okwck6ycH6iVYSxMKYKUj5HfEUO5UcLT0ho33/e7DLnSOJv56slfCqPCIPlTBEnWdjQTEma6CnIWlUfkRT8LEi9VR+RlAj3xuiZK01dACQZSm0WjEQKUTciqTZfOXdior017zO+rbwy7xM2HgKvnAESToSN/xN/GPB7adb/hcMnk5Zn+E81KYz/11bpgb9S4bOsoPgKAwAAAABJRU5ErkJggg==",A=function(){function e(e,t,i){e.onUpdate.subscribe(this.onViewportUpdate.bind(this),!1,!0),this.iframe=i,this.win=t,this.doc=t.document,this.paused=!1,this.visible=!1,this.previousHoverEl=null,this.previousDEBounds=null,this.viewScale=1,this.frameScale=1,this.touchPts=[],this.clickEls=[],this.touchEls=[],this.hoveredEls=[],this.setupMouseEl(),this.setPos(0,0)}var i=e.prototype;return i.dispose=function(){function e(e){e.parentNode.removeChild(e)}e(this.el),this.clickEls.forEach(e),this.touchEls.forEach(e),this.previousHoverEl=null},i.setVisible=function(e){void 0!==e&&(this.visible=e);var t=this.visible?"visible":"hidden";this.el.style.visibility!==t&&(this.el.style.visibility=t,this.visible&&this.updateMousePos())},i.transformCoord=function(e){var t,i=e.x,n=e.y,s=this.iframe.getBoundingClientRect();t=this.iframe.contentDocument.documentElement?this.iframe.contentDocument.documentElement.getBoundingClientRect():this.previousDEBounds,this.previousDEBounds=t,i+=t.left/this.viewScale,n+=t.top/this.viewScale,i*=this.viewScale,n*=this.viewScale,i+=o.playbackFrameBorder,n+=o.playbackFrameBorder;var r=s.width,a=s.height;return i-=r/this.frameScale/2,n-=a/this.frameScale/2,i*=this.frameScale,n*=this.frameScale,i+=r/2,n+=a/2,i+=s.left,n+=s.top,{x:i-=this.bodyXOffset,y:n}},i.setPos=function(e,t,i){this.pos={x:e,y:t},this.updateMousePos(),this.handleHovering(),i&&i.distance>0&&this.animate(i)},i.updateMousePos=function(){if(this.visible){var e=this.transformCoord(this.pos);this.el.style.transform="translate("+(e.x-a.x)+"px,"+(e.y-a.y)+"px)"}},i.click=function(e){var t=this,i=this.transformCoord(e),n=this.doc.createElement("img");n.style.position="absolute",n.style.width=p+"px",n.style.height=f+"px",n.style.top="0px",n.style.left="0px",n.style.zIndex="999999900",n.style.transform="translate("+(i.x-m.x)+"px,"+(i.y-m.y)+"px)",n.setAttribute("id",v),n.setAttribute("src",y),this.clickEls.push(n),this.doc.body.appendChild(n),new r({singleton:n,duration:600,finished:function(){t.clickEls.splice(t.clickEls.indexOf(n),1),n.parentNode&&n.parentNode.removeChild(n)},frameCallback:function(i){i=1-i,n.style.opacity=i,n.style.filter="alpha(opacity="+Math.round(100*i)+")";var s=t.transformCoord(e);n.style.transform="translate("+(s.x-m.x)+"px,"+(s.y-m.y)+"px)"}}).go()},i.mouseDown=function(){this.el.setAttribute("src",u)},i.mouseUp=function(){this.el.setAttribute("src",c)},i.onViewportUpdate=function(e){this.bodyXOffset=e.bodyXOffset,this.viewScale=e.viewScale,this.frameScale=e.frameScale,this.touchPts.length&&this.touchUpdate(this.touchPts),this.updateMousePos()},i.touchUpdate=function(e){this.updateTouchPts(e);for(var t=0;t<this.touchEls.length;t++){var i=this.transformCoord(this.touchPts[t]);this.touchEls[t].style.transform="translate("+(i.x-g.x)+"px,"+(i.y-g.y)+"px)"}},i.touchEnd=function(){for(var e=0;e<this.touchPts.length;e++)this.click(this.touchPts[e]);this.updateTouchPts([])},i.updateTouchPts=function(e){for(this.touchPts=e;this.touchEls.length<e.length;)this.setupTouchEl();for(;this.touchEls.length>e.length;)this.touchEls[0].parentNode.removeChild(this.touchEls[0]),this.touchEls.shift()},i.handleHovering=function(){var e;if(this.visible){this.el.style.display="none";var i=t.getScroll(this.iframe.contentWindow),n=this.pos.x-i.x,s=this.pos.y-i.y;if((e=this.iframe.contentDocument.elementFromPoint(n,s))&&"IFRAME"===e.tagName)try{var r=e.getBoundingClientRect(),o=n-Math.round(r.x),a=s-Math.round(r.y);e=e.contentDocument.elementFromPoint(o,a)}catch(d){e=null}e?this.previousHoverEl!==e&&(this.removeHoverState(),this.previousHoverEl=e,this.applyHoverState(e)):this.previousHoverEl&&(this.removeHoverState(),this.previousHoverEl=null),this.el.style.display="block"}},i.applyHoverState=function(e){e.setAttribute("fsrhover","true"),this.hoveredEls.push(e),e.parentElement&&"BODY"!==e.tagName&&this.applyHoverState(e.parentElement)},i.removeHoverState=function(){this.hoveredEls.forEach(function(e){e.removeAttribute("fsrhover")}),this.hoveredEls=[]},i.animate=function(e,t){var i=this;this.win.requestAnimationFrame(function(n){var s=n-(t=t||n);s>=e.timeTillNext?i.setPos(e.end.x,e.end.y):(i.playFrame(e,s),i.animate(e,t))})},i.playFrame=function(e,t){isNaN(e.ctp1.x)&&(e.ctp1=e.ctp2);var i=function(e,t,i,n,s){var r={x:0,y:0};return r.x=t.x*T(e)+i.x*I(e)+n.x*S(e)+s.x*x(e),r.y=t.y*T(e)+i.y*I(e)+n.y*S(e)+s.y*x(e),r}(t/e.timeTillNext,e.start,e.ctp1,e.ctp2,e.end);this.setPos(Math.round(i.x),Math.round(i.y))},i.setupMouseEl=function(){this.el=this.doc.createElement("img"),this.el.style.position="absolute",this.el.style.width=d+"px",this.el.style.height=h+"px",this.el.style.top="0px",this.el.style.left="0px",this.el.style.zIndex=900,this.el.setAttribute("id",l),this.el.setAttribute("src",c),this.setVisible(),this.doc.body.appendChild(this.el)},i.setupTouchEl=function(){var e=this.doc.createElement("img");e.style.position="absolute",e.style.width=w+"px",e.style.height=E+"px",e.style.top="0px",e.style.left="0px",e.style.zIndex="999999900",e.style.transform="translate(-100px,-100px)",e.setAttribute("src",b),this.touchEls.push(e),this.doc.body.appendChild(e)},e}();function x(e){return e*e*e}function S(e){return 3*e*e*(1-e)}function I(e){return 3*e*(1-e)*(1-e)}function T(e){return(1-e)*(1-e)*(1-e)}var C=function(){function e(e){this.elParent=e}var t=e.prototype;return t._initDOM=function(){this.el||(this.el=window.document.createElement("div"),this.el.id="counter",this.el.classList.add("hidden"),this.el.classList.add("center"),this.elParent.appendChild(this.el)),this.elSVG||(this.elSVG=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this.elSVG.id="graph",this.elSVG.setAttribute("viewBox","0 0 1 1"),this.el.appendChild(this.elSVG)),this.elCaption||(this.elCaption=window.document.createElement("div"),this.elCaption.id="caption",this.el.appendChild(this.elCaption)),this.elSVGCircle||(this.elSVGCircle=window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this.elSVGCircle.id="c",this.elSVG.appendChild(this.elSVGCircle))},t.start=function(e,t,i){var n=this;this._caption=e,this._duration=t,this._timeoutStart=Date.now(),this._timeoutResolve=i,this._timeout=window.setTimeout(function(){n.hide();var e=n._timeoutResolve;return delete n._duration,delete n._timeoutStart,delete n._timeoutResolve,delete n._timeout,e()},this._duration),this.show(e)},t.show=function(e){var t=this;this._initDOM(),window.requestAnimationFrame(function(){t.el.classList.remove("hidden"),t.elCaption.textContent=e,window.requestAnimationFrame(function(){t.elSVGCircle.style.setProperty("stroke-dashoffset",0)})})},t.hide=function(){window.clearTimeout(this._timeout),delete this._timeout,this.el.classList.add("hidden"),this.elSVGCircle&&(this.elSVGCircle.remove(),delete this.elSVGCircle)},t.pause=function(){this._timeout&&(window.clearTimeout(this._timeout),delete this._timeout,this._duration-=Date.now()-this._timeoutStart,this.elSVGCircle.style.setProperty("stroke-dashoffset",getComputedStyle(this.elSVGCircle).strokeDashoffset),this.elSVGCircle.style.setProperty("transition-duration",this._duration+"ms"))},t.resume=function(){this._timeoutResolve&&this.start(this._caption,this._duration,this._timeoutResolve)},e}();C.prototype=Object.assign(C.prototype,{el:null,elParent:null,elSVG:null,elSVGCircle:null,elCaption:null,_timeout:null,_timeoutResolve:null});var O=function(){};(O.prototype=Object.assign(O.prototype,{el:null,elContainer:null})).init=function(e){e=Object.assign({width:0,height:0,transform:""},e);var t=this.el;t||((t=window.document.createElement("div")).classList.add("overlay"),t.style.setProperty("zoom","1.01"),this.elContainer=window.document.createElement("div"),this.elContainer.style.position="relative",this.elContainer.style.width="100%",this.elContainer.style.height="100%",t.appendChild(this.elContainer)),t.style.setProperty("width",e.width+"px"),t.style.setProperty("height",e.height+"px"),t.style.setProperty("transform",e.transform),this.el||(this.el=window.document.body.appendChild(t))};var P=function(){function e(e){this.shade=e}var t=e.prototype;return t._initDOM=function(){return this.el||(this.el=window.document.createElement("div"),this.el.id="progress"),this.update(0),this.el},t.show=function(){this.shown||(this.shown=!0,this.shade.el.appendChild(this._initDOM()))},t.hide=function(){this.shown&&(this.shown=!1,this.shade.el.removeChild(this.el))},t.update=function(e){this.el.style="width: "+e+"%"},e}();P.prototype=Object.assign(P.prototype,{el:null,shade:null,shown:!1});var k=function(){function e(e){this.elParent=e}var t=e.prototype;return t._initDOM=function(){var e=this.el;return e||((e=window.document.createElement("div")).id="shade"),e.classList.add("hidden"),e.classList.add("center"),e.classList.remove("pageEnd"),this.el||(this.el=this.elParent.appendChild(e)),this.el},t.show=function(){this._initDOM().classList.remove("hidden")},t.hide=function(){this._initDOM().classList.add("hidden")},t.showEnd=function(){this._initDOM(),this.el.classList.remove("hidden"),this.el.classList.add("pageEnd")},e}();k.prototype=Object.assign(k.prototype,{el:null,elParent:null}),k.prototype.hideEnd=k.prototype.hide;var D=function(){function e(e){this.player=e,this.iframe=null,this.overlay=null,this.shade=null,this.counter=null,this.progress=null}var i=e.prototype;return i.initialize=function(){this.fixUndefinedInPage(),this.setupPageTitle(),this.setupPageStyles(),this.setupPlaybackIframe(),this.setupOverlay(),this.setupClickHandler(),this.requestNotifyPermission()},i.requestNotifyPermission=function(){"granted"===Notification.permission||this.player.preplayer||Notification.requestPermission()},i.notify=function(e){console.log("rp: notify:",e),Notification&&!this.preplayer&&"granted"===Notification.permission&&new Notification("cxReplay Web Playback",{icon:"/special_assets/notification.png",body:e})},i.loading=function(){return this.shade.show(),Promise.resolve()},i.updateProgress=function(e){e<100?(this.progress.show(),this.progress.update(e)):this.progress.hide()},i.advancePage=function(){return this.shade.show(),new Promise(function(e){window.setTimeout(e,o.overlayShadeFadeTime)})},i.loadingDone=function(){return this.shade.hide(),this.progress.hide(),Promise.resolve()},i.skipTime=function(e){var t=this;return new Promise(function(i,n){var s,r,a,d;t.counter.start((s=e,a=~~((s-=36e5*(r=~~(s/36e5)))/6e4),d=~~((s-=6e4*a)/1e3),[r<10?"0":"",r,":",a<10?"0":"",a,":",d<10?"0":"",d,".",~~((s-=1e3*d)/100)].join("")),o.overlayShadeSkipTime,i,n)})},i.pause=function(){this.counter.pause()},i.resume=function(){this.counter.resume()},i.endOfPlayback=function(){return this.shade.showEnd(),Promise.resolve()},i.setupPlaybackIframe=function(){var e=this;this.iframe=document.createElement("iframe"),this.iframe.id="playback",this.iframe.width=window.innerWidth-20,this.iframe.height=window.innerHeight-20,new ResizeObserver(function(){e.overlay.init({width:e.iframe.width,height:e.iframe.height,transform:e.iframe.style.transform})}).observe(this.iframe),document.body.appendChild(this.iframe)},i.clearPlaybackIframe=function(e){var t=this;return new Promise(function(i){t.iframe.addEventListener("load",function e(){t.iframe.removeEventListener("load",e,!1),i()},!1),t.iframe.srcdoc=(e.docType||"<!DOCTYPE html>")+"<html></html>"}).then(function(){var e=t.iframe.contentWindow.document,i=e.head;i.parentNode.removeChild(i);var n=e.body;n.parentNode.removeChild(n),t.setupClickHandler()})},i.fixUndefinedInPage=function(){var e=document.body.childNodes[0];e&&e.textContent.indexOf("undefined")>-1&&document.body.removeChild(e)},i.setupClickHandler=function(){var e=this,i=function(t){"fsrVideoDownloadLink"!==t.target.id&&(t.preventDefault(),t.stopPropagation(),e.player.loaded&&(e.player.playbackFinished?e.player.advancePage():e.player.paused?(e.player.videoSyncUp(),e.notify("Resuming playback. Left-click to pause."),e.player.resume()):(e.player.videoSyncUp(),e.notify("Pausing playback. Left-click to resume."),e.player.pause())))};t.Unbind("ui:*"),t.Bind(document.body,"ui:click",i),t.Bind(this.iframe.contentWindow.document,"ui:click",i)},i.setupPageTitle=function(){var e=document.getElementsByTagName("title")[0];e||(e=document.createElement("title"),document.head.appendChild(e))},i.updatePageTitle=function(e){document.getElementsByTagName("title")[0].innerText="Replay "+e.session_id.substr(0,5)+" Page "+e.page_number},i.setupPageStyles=function(){var e=window.document.createElement("link");e.setAttribute("rel","preload"),e.setAttribute("as","image"),e.setAttribute("href",o.pathFSLogo),document.head.appendChild(e);var t=document.createElement("style");t.appendChild(document.createTextNode(o.data)),document.head.appendChild(t)},i.setupOverlay=function(){this.overlay=new O,this.overlay.init({width:this.iframe.width,height:this.iframe.height,transform:this.iframe.style.transform}),this.shade=new k(this.overlay.elContainer),this.progress=new P(this.shade),this.counter=new C(this.overlay.elContainer)},e}();var M=function(){function e(e){this.vwidth=e.vwidth,this.vheight=e.vheight,this.framerate=e.framerate,this.bitrate=e.bitrate,this.uploadPort=e.uploadPort,this.recording=!1,this.params=e,this.blobs=[],this.seq=0,this.asked=!1,this.startTime=-1,this.timeOffset=0}var i=e.prototype;return i.pause=function(){return this._awaitRecorderAction("pause")},i.resume=function(){return this.recorder&&"paused"===this.recorder.state?this._awaitRecorderAction("resume"):this._awaitRecorderAction("start",1e4)},i.stop=function(){return this._awaitRecorderAction("stop")},i.setup=function(){var e=this;return this.recorder?Promise.resolve():this.asked?Promise.resolve():(this.asked=!0,this._setTitleToKnownValue(),(new t.Browser).browser.version>73&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?this.standardSetup():this._getSourceId().then(function(t){return e._restoreTitle(),e._getUserMedia(t)}).then(this._setupMediaRecorder.bind(this)).catch(function(t){e._restoreTitle(),console.warn("Unable to capture video: "+t)}))},i.standardSetup=function(){var e=this,t={audio:!1,video:{displaySurface:"browser",width:{ideal:this.vwidth},height:{ideal:this.vheight},frameRate:{ideal:this.framerate}}};return navigator.mediaDevices.getDisplayMedia(t).then(function(t){return e._restoreTitle(),e._setupMediaRecorder(t)}).catch(function(t){e._restoreTitle(),console.warn("Unable to capture video: "+t)})},i._setTitleToKnownValue=function(){var e=document.getElementsByTagName("title")[0];this.previousTitle=e.innerHTML,e.innerText="Choose-this-tab"},i._restoreTitle=function(){document.getElementsByTagName("title")[0].innerHTML=this.previousTitle,delete this.previousTitle},i._getSourceId=function(){return new Promise(function(e,t){var i=setTimeout(function(){window.removeEventListener("message",n),"https:"===location.protocol?t(new Error("Install simpleCapture browser extension")):t(new Error("Needs to be https"))},500);function n(s){s.origin===window.location.origin&&("ohai-webpage"===s.data&&(clearTimeout(i),window.postMessage("get-simple-capture-source","*")),!s.data.length&&"sourceId"in s.data&&(window.removeEventListener("message",n),s.data.sourceId?e(s.data.sourceId):t(new Error("Permission denied (maybe need --allow-http-screen-capture?)"))))}window.addEventListener("message",n),window.postMessage("ohai-simple-capture","*")})},i._getUserMedia=function(e){var t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxWidth:this.vwidth,maxHeight:this.vheight,maxFrameRate:this.framerate}}};return console.log("Asking for these constraints: "+JSON.stringify(t,null,2)),navigator.mediaDevices.getUserMedia(t)},i._setupMediaRecorder=function(e){var t=this;this.stream=e,console.log("Success getting a stream with these settings: "+JSON.stringify(e.getVideoTracks()[0].getSettings(),null,2)),this.recorder=new MediaRecorder(e,{mimeType:"video/webm;codecs=h264",videoBitsPerSecond:this.bitrate}),this.recorder.addEventListener("dataavailable",this._onDataAvailable.bind(this),!1),this.recorder.addEventListener("stop",this._onRecordingStop.bind(this),!1),this.recorder.addEventListener("error",this._onRecordingError.bind(this),!1),this.recorder.addEventListener("start",function(e){t.blobs=[],t.timeOffset=0,t.startTime=e.timeStamp,t.recording=!0},!1),this.recorder.addEventListener("stop",function(e){t.startTime>-1&&(t.timeOffset+=e.timeStamp-t.startTime),t.startTime=-1,t.recording=!1},!1),this.recorder.addEventListener("resume",function(e){t.startTime<0&&(t.startTime=e.timeStamp),t.recording=!0},!1),this.recorder.addEventListener("pause",function(e){t.startTime>-1&&(t.timeOffset+=e.timeStamp-t.startTime),t.startTime=-1,t.recording=!1},!1)},i.getDuration=function(){return this.startTime<0?this.timeOffset:this.timeOffset+(performance.now()-this.startTime)},i._onDataAvailable=function(e){console.log("Data available: "+this.seq+" duration here: "+this.getDuration()),this.uploadPort?this._uploadScreenCapture(this.seq,e.data):this.blobs.push(e.data),this.seq+=1},i._onRecordingStop=function(){this.uploadPort||this._downloadScreenCapture(),this.recorder=null,this.stream.getTracks()[0].stop(),this.stream=null},i._onRecordingError=function(e){console.log("Recording error: "+e.message)},i._awaitRecorderAction=function(e,t){var i=this,n=this.recorder;return n?new Promise(function(s,r){var o=function t(){n.removeEventListener(e,t,!1),n.removeEventListener("error",a,!1),s()};function a(){n.removeEventListener(e,o,!1),n.removeEventListener("error",a,!1),r(new Error("Failed to start recording"))}n.addEventListener(e,o,!1),n.addEventListener("error",a,!1),"start"==e?i.recorder.start(t):n[e]()}):Promise.resolve()},i._downloadScreenCapture=function(){var e=new Blob(this.blobs,{type:"video/webm"}),t=window.URL.createObjectURL(e),i=document.createElement("a");i.id="fsrVideoDownloadLink",i.style="display:none;",i.href=t,i.download="recording-"+Date.now()+".webm",i.innerText="Download Video Here",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t),console.log("Replay entirely finished")},i._uploadScreenCapture=function(e,i){var n=this;if(this.uploading)this.blobs.push({seq:e,data:i});else{this.uploading=!0;var s=function(){if(n.uploading=!1,n.blobs.length>0){n.blobs.sort(function(e,t){return e.seq-t.seq});var e=n.blobs.shift();n._uploadScreenCapture(e.seq,e.data)}else n.recorder&&"inactive"!==n.recorder.state||n.finishUploading()},r="http://localhost:"+this.uploadPort+"/upload/"+e;console.log("Uploading blob "+e+" to "+r),(new t.AjaxTransport)._sendViaXHR({method:"POST",url:r,contentType:"video/webm",skipEncode:!0,data:i,success:s,failure:s})}},i.finishUploading=function(){var e=function(){console.log("Replay entirely finished")};(new t.AjaxTransport).send({method:"POST",url:"http://localhost:"+this.uploadPort+"/upload/done",contentType:"video/webm",skipEncode:!0,data:"",success:e,failure:e})},e}(),N=function(){function i(e){this.iframe=e,this.doc=e.contentWindow.document,this.params={},this.viewScale=1,this.frameScale=1,this.bodyXOffset=0,this.onUpdate=new t.FSEvent,this.forceUpdate=!0}var n=i.prototype;return n.update=function(t){var i=this.params;this.params=e.ext({},this.params,t);var n=!1;(i.vw!==this.params.vw||i.vh!==this.params.vh||i.lw!==this.params.lw||i.lh!==this.params.lh||this.forceUpdate)&&(n=!0,this.resize()),this.forceUpdate=!1,i.vx===this.params.vx&&i.vy===this.params.vy||(n=!0),n&&(this.params.viewScale=this.viewScale,this.params.frameScale=this.frameScale,this.onUpdate.fire(this.params,this.doc))},n.dispose=function(){this.onUpdate.unsubscribeAll()},n.zoomedIframeSize=function(e,t){var i=e,n=t,s=document.documentElement.clientWidth-(20+2*o.playbackFrameBorder),r=document.documentElement.clientHeight-(20+2*o.playbackFrameBorder),a=Math.min(s/i,r/n);return{w:Math.ceil(e*a),h:Math.ceil(t*a),scale:a}},n.getIframeSize=function(e,t,i){var n=i,s=t*i/e;return{w:Math.round(n),h:Math.round(s)}},n.rezoom=function(e,t){var i=this.zoomedIframeSize(e,t).scale;this.iframe.style.transform="scale("+i+")",this.frameScale=i},n.resizeIframe=function(e,t,i,n){var s=this.getIframeSize(e,t,i,n);if(s.w>window.innerWidth){var r=s.w+20;document.body.style.width=r+"px",this.params.bodyXOffset=(window.innerWidth-r)/2,document.body.style.transform="translateX("+this.params.bodyXOffset+"px)"}else document.body.style.width="100%",document.body.style.removeProperty("transform"),this.params.bodyXOffset=0;this.iframe.setAttribute("width",s.w),this.iframe.setAttribute("height",s.h),this.rezoom(s.w,s.h)},n.resize=function(){this.resizeIframe(this.params.vw,this.params.vh,this.params.lw,this.params.lh)},i}(),R=function(){var e=/^(?:(only|not)?\s*([_a-z][_a-z0-9-]*)|(\([^)]+\)))(?:\s*and\s*(.*))?$/i,t=/^\(\s*(?:-webkit-)?([_a-z-][_a-z0-9-]*)\s*(?::\s*([^)]+))?\s*\)$/,i=/^(?:(min|max)-)?(.+)/,n=/(em|rem|px|cm|mm|in|pt|pc)?\s*$/,s=/(dpi|dpcm|dppx)?\s*$/;function r(e){var t,i=Number(e);return Number.isNaN(i)&&(i=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),i}function o(e){var t=parseFloat(e);switch(String(e).match(s)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function a(e){var t=parseFloat(e);switch(String(e).match(n)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}return{matchQuery:function(n,s){return function(n){return n.split(",").map(function(n){var s=(n=n.trim()).match(e);if(!s)throw new SyntaxError('Unable to parse query: "'+n+'"');var r=s[1],o=s[2],a=((s[3]||"")+(s[4]||"")).trim(),d={};if(d.inverse=!!r&&"not"===r.toLowerCase(),d.type=o?o.toLowerCase():"all",!a)return d.expressions=[],d;if(!(a=a.match(/\([^)]+\)/g)))throw new SyntaxError('Unable to parse expressions: "'+n+'"');return d.expressions=a.map(function(e){var n=e.match(t);if(!n)throw new SyntaxError('Unabled to parse expression: "'+e+'"');var s=n[1].toLowerCase().match(i);return{modifier:s[1],feature:s[2],value:n[2]}}),d})}(n).some(function(e){var t=e.inverse,i="all"===e.type||s.type===e.type;if(i&&t||!i&&!t)return!1;var n=e.expressions.every(function(e){var t=e.feature,i=e.modifier,n=e.value,d=s[t];if(!d)throw new Error("Missing value for "+t);switch(t){case"orientation":case"scan":return d.toLowerCase()===n.toLowerCase();case"width":case"height":case"device-width":case"device-height":n=a(n),d=a(d);break;case"resolution":n=o(n),d=o(d);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":n=r(n),d=r(d);break;case"grid":case"color":case"color-index":case"monochrome":n=parseInt(n,10)||1,d=parseInt(d,10)||0}switch(i){case"min":return d>=n;case"max":return d<=n;default:return d===n}});return n&&!t||!n&&t})}}}(),L=function(){function e(e){this.mobile=!1,e.onUpdate.subscribe(this._onViewportUpdate.bind(this),!1,!0),this.fixedHoverRules=new Set,this.fixedMediaQueries=new Set,this.originalMediaQueries=new Map}var t=e.prototype;return t.updatedDOM=function(e){this._fixCSS(e),this._hideScrollBarsOnMobile(e),this.badgeCssFound&&(this.badgeCssPatched=!0)},t._fixCSS=function(e,t){var i,n=e.styleSheets;for(i=0;i<n.length;i++)n[i].disabled||this._recurseRules(e,n[i],t)},t._safeToUse=function(e){try{if(e.cssRules)return!0}catch(t){console.error("Failed to access CSS:",t,e),console.error("Ensure you are loading the replay over https!!")}return!1},t._recurseRules=function(e,t,i){if(this._safeToUse(t)){var n,s=t.cssRules;for(n=0;n<s.length;n++)s[n].cssRules?s[n].type===CSSRule.MEDIA_RULE?(this._fixDeviceMediaRule(e,s[n]),e.defaultView.matchMedia(s[n].conditionText).matches&&this._recurseRules(e,s[n])):s[n].type!==CSSRule.KEYFRAMES_RULE&&this._recurseRules(e,s[n]):i||(this._replaceHoverStyles(e,s[n],t,n),this._fixHiddenDocumentElement(e,s[n],t,n))}},t._fixDeviceMediaRule=function(e,t){if(!this.fixedMediaQueries.has(t)&&(this.fixedMediaQueries.add(t),t.conditionText.match(/device|width|height|orientation|resolution|pixel-ratio/))){var i,n=t.conditionText;this.originalMediaQueries.has(t)?n=(i=this.originalMediaQueries.get(t)).cond:this.originalMediaQueries.set(t,{cond:n,list:Array.prototype.slice.call(t.media,0)});try{var s=this.viewportParams,r=s.vw>s.vh,o=r?s.dh:s.dw,a=r?s.dw:s.dh,d=Math.max(o,a)/Math.min(o,a),h=R.matchQuery(n,{type:"screen",width:s.lw+"px",height:s.lh+"px","device-width":o+"px","device-height":a+"px","device-aspect-ratio":d,"aspect-ratio":d,"device-pixel-ratio":e.defaultView.devicePixelRatio,"pixel-ratio":e.defaultView.devicePixelRatio,"device-resolution":"150dpi",resolution:"150dpi",orientation:r?"landscape":"portrait"});if(h&&!e.defaultView.matchMedia(n).matches)console.warn("Modifying to enable:",t),t.conditionText!==n+", all"&&t.media.appendMedium("all");else if(!h&&e.defaultView.matchMedia(n).matches){if(console.warn("Modifying to disable:",t),"not all"!==t.conditionText){for(;t.media.length>0;)t.media.deleteMedium(t.media[0]);t.media.appendMedium("not all")}}else if(i&&n!==t.conditionText){for(;t.media.length>0;)t.media.deleteMedium(t.media[0]);for(var l=0;l<i.list.length;l++)t.media.appendMedium(i.list[l]);console.warn("Restoring original:",t)}}catch(c){console.error("Unable to parse media query:",n,c)}}},t._hideScrollBarsOnMobile=function(e){this.mobile&&e.documentElement&&e.body&&(e.documentElement.style.overflow="hidden",e.body.style.overflow="hidden")},t._replaceHoverStyles=function(e,t,i,n){if(t.selectorText){var s=t.selectorText.replace(/:hover\b/gi,'[fsrhover="true"]');if(s!==t.selectorText&&!this.fixedHoverRules.has(t)){this.fixedHoverRules.add(t);try{t.selectorText=s}catch(o){}if(t.selectorText.indexOf(s)<0){var r=t.cssText.replace(t.selectorText,s);try{i.insertRule(r,n),i.deleteRule(n+1)}catch(o){}}}}},t._fixHiddenDocumentElement=function(e,t){"html"===t.selectorText&&("none"===t.style.display&&(t.style.removeProperty("display"),console.warn("Removing iframe display:none security fix")),"hidden"===t.style.visibility&&(t.style.removeProperty("visibility"),console.warn("Removing iframe visibility:hidden security fix")))},t._onViewportUpdate=function(e,t){var i=this.viewportParams&&(e.lw!==this.viewportParams.lw||e.lh!==this.viewportParams.lh);this.viewportParams=e,i&&(this.fixedMediaQueries.clear(),this._fixCSS(t,!0))},e}(),U=function(){function e(){this.elIndex=new Map,this.idIndex=new Map,this.idEl=new Map,this.root=null,this.nextId=1}var t=e.prototype;return t.scan=function(e){var t,i,n=[],s={id:0,p:0,t:e.nodeType,c:n};for(null==this.root&&(this.root=s),t=0,i=e.childNodes.length;t<i;t++)n.push(this.scan(e.childNodes[t]));if(this._track(e,s),null!=e.nodeValue&&(s.v=e.nodeValue),"#"!==e.nodeName[0]){if(s.n=e.nodeName,e.hasAttributes&&e.hasAttributes())for(s.a={},t=0,i=e.attributes.length;t<i;t++)s.a[e.attributes[t].name]=e.attributes[t].value;10===e.nodeType&&(s.publicId&&(s.publicId=e.publicId),s.systemId&&(s.systemId=e.systemId))}for(t=0,i=n.length;t<i;t++)n[t].p=s.id;return s},t.import=function(e){var t,i;if(null==this.root&&(this.root=e),e.c)for(t=0,i=e.c.length;t<i;t++)this.import(e.c[t]);return this.idIndex.set(e.id,e),e},t.add=function(e){var t=e.parentNode,i=this.get(t),n=this.scan(e),s=Array.prototype.indexOf.call(t.childNodes,e);return i.c.splice(s,0,n),n.p=i.id,n},t.insert=function(e,t){var i=this.getById(t.p);return this.import(t),i.c||(i.c=[]),i.c.splice(e,0,t),t},t.move=function(e,t,i,n){var s,r=this.get(e),o=this.getById(r.p),a=this.get(t);o.c.splice(o.c.indexOf(r),1),r.p=a.id,i?n?a.c.splice(a.c.indexOf(this.get(n)),0,r):((s=a.c.indexOf(this.get(i))+1)>a.c.length&&(s=a.c.length),s<0&&(s=0),a.c.splice(s,0,r)):a.c.unshift(r)},t.moveById=function(e,t,i){var n=this.getById(e),s=this.getById(n.p),r=this.getById(t);s.c.splice(s.c.indexOf(n),1),r.c||(r.c=[]),r.c.splice(i,0,n),n.p=r.id},t.get=function(e){return this.elIndex.get(e)},t.getById=function(e){return this.idIndex.get(e)},t.remove=function(e){for(var t=this.get(e),i=t.c.length-1;i>=0;i--)this.remove(this.idEl.get(t.c[i].id));this.elIndex.delete(e),this.idIndex.delete(t.id),this.idEl.delete(t.id);var n=this.getById(t.p);return n.c.splice(n.c.indexOf(t),1),t},t.removeById=function(e){var t,i=this.getById(e),n=this.getById(i.p);if(i.c)for(t=i.c.length-1;t>=0;t--)this.removeById(i.c[t].id);return this.idIndex.delete(e),n.c.splice(n.c.indexOf(i),1),i},t._track=function(e,t){var i=this.nextId;return this.nextId++,t.id=i,this.elIndex.set(e,t),this.idIndex.set(i,t),this.idEl.set(i,e),i},t.dispose=function(){this.elIndex.clear(),this.idIndex.clear(),this.idEl.clear(),this.nextId=1,this.root=null},e}(),B=function(){function e(e){this.root=e,this.tree=new U,this.idEl=new Map,this.loadPromises=[],this.initialLoad=!0}var t=e.prototype;return t.import=function(e){if(this.initialLoad=!0,this.tree.import(e),e.a)for(var t in e.a)this.setElAttribute(this.root,t,e.a[t]);this.reconstruct(this.root,e),this.initialLoad=!1},t.get=function(e){return this.idEl.get(e)},t.insert=function(e,t){var i=this.tree.getById(t.p);if(i){this.tree.insert(e,t);var n=this.createElement(t),s=this.get(i.id);try{if(!i.c||e+1>=i.c.length)s.appendChild(n);else{var r=this.get(i.c[e+1].id);if(!r)throw new Error("Sibling not found!");s.insertBefore(n,r)}}catch(o){return void console.error("Attempt to insert node into a element that can't contain nodes:",s)}this.reconstruct(n,t)}else console.warn("Attempt to insert node into unknown parent:",t.p)},t.move=function(e,t,i){var n=this.get(e);if(n){var s=this.get(t);s?(n.parentNode.removeChild(n),i>=s.childNodes.length?s.appendChild(n):s.insertBefore(n,s.childNodes[i]),this.tree.moveById(e,t,i)):console.warn("Attempt to move node to unknown parent node:",t)}else console.warn("Attempt to move unknown node:",e)},t.remove=function(e){var t=this.get(e),i=this.tree.getById(e);t&&i?(this.forget(i),t.parentNode.removeChild(t),this.tree.removeById(e)):console.warn("Attempt to remove node",e,"which doesn't exist!")},t.updateCharData=function(e,t){var i=this.get(e),n=this.tree.getById(e);if(n&&i)if(n.v=t,3===i.nodeType&&"STYLE"===i.parentNode.nodeName){var s=i.parentNode.parentNode,r=this.tree.getById(n.p);this.forget(r);var o=i.parentNode,a=this.createElement(r);this.reconstruct(a,r),s.replaceChild(a,o)}else i.nodeValue=t;else console.warn("Attempt to change text of unknown node:",e)},t.modifyAttr=function(e,t,i){var n=this.get(e),s=this.tree.getById(e);if(s&&n&&n.setAttribute)if(s.a=s.a||{},s.a[t]=i,"style"===t&&s.redact&&(n.style.filter="brightness(0)"),"src"!==t&&"href"!==t||!this.willElementLoad(s))n.setAttribute(t,i);else{var r=n.parentNode;this.forget(s);var o=this.createElement(s);this.reconstruct(o,s),r.replaceChild(o,n)}else console.warn("Attempt to modify attr of unknown node:",e)},t.waitForLoad=function(){var e=this.loadPromises;return this.loadPromises=[],e.length?Promise.all(e):Promise.resolve()},t.reconstruct=function(e,t){var i,n;if(this.idEl.set(t.id,e),t.c)for(i=0;i<t.c.length;i++)n=this.createElement(t.c[i]),e.appendChild(n),this.reconstruct(n,t.c[i])},t.createElement=function(e){var t,i;if(1===e.t){if(this.hasParentSVG(e))t=document.createElementNS("http://www.w3.org/2000/svg",e.n);else if("canvas"===e.n.toLowerCase())t=this.createCanvasPlaceHolder(e);else try{t=document.createElement(e.n.toLowerCase())}catch(n){console.warn("Attempt to create bad element: "+e.n),t=document.createElement("badname")}if(this.willElementLoad(e)&&this.promiseOnLoad(t),e.a)for(i in e.a)"IFRAME"===e.n&&"src"===i?this.setElAttribute(t,i,"about:blank"):this.setElAttribute(t,i,e.a[i]);e.redact&&(t.style.filter="brightness(0)"),"IFRAME"===e.n&&this.markIframeNotRecorded(t)}else if(3===e.t)t=document.createTextNode(e.v);else{if(8!==e.t)throw new Error("Unimplemented type: "+e.t);t=document.createComment(e.v)}return t},t.markIframeNotRecorded=function(e){(this.loadPromises[this.loadPromises.length-1]||Promise.resolve()).then(function(){e.contentDocument&&(e.contentDocument.body.innerHTML="<div>IFrame Not Recorded</div>",e.contentDocument.body.style.width="100%",e.contentDocument.body.style.height="100vh",e.contentDocument.body.style.display="flex",e.contentDocument.body.style.justifyContent="center",e.contentDocument.body.style.alignItems="center",e.contentDocument.body.style.backgroundColor="#bbb",e.contentDocument.body.style.overflow="hidden",e.contentDocument.body.style.fontSize="24px",e.contentDocument.body.style.margin="0")})},t.setElAttribute=function(e,t,i){try{e.setAttribute(t,i)}catch(r){var n=document.createElement("div");n.innerHTML="<div "+t+'="'+i+'"></div>';var s=n.childNodes[0].attributes[0].cloneNode();e.setAttributeNode(s)}},t.createCanvasPlaceHolder=function(e){var t=document.createElement("DIV");t.setAttribute("canvas","");var i=["div[canvas] {","  background-image: linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%) !important;","  background-size: 2em 2em !important;","  background-position: 0 0, 0 1em, 1em -1em, -1em 0 !important;","}"].join("\n"),n=this.root.ownerDocument.styleSheets[this.root.ownerDocument.styleSheets.length-1];return n||console.error("No stylesheet found. Canvas",e.id,"will not render correctly.",t),n.insertRule(i,n.cssRules.length),t},t.hasParentSVG=function(e,t){if(t>100)throw new Error("Detected parent cycle!!");if(!e.p)return!1;var i=this.tree.getById(e.p);return!!i&&(!(!e.n||"SVG"!==e.n.toUpperCase())||this.hasParentSVG(i,(t||0)+1))},t.willElementLoad=function(e){return!("IMG"!==e.n||!e.a||!e.a.src||0===e.a.src.indexOf("data:"))||(!!("LINK"===e.n&&e.a&&e.a.rel&&e.a.rel.indexOf("stylesheet")>-1&&e.a.href)||("STYLE"===e.n||"IFRAME"===e.n))},t.promiseOnLoad=function(e){var t=this;this.loadPromises.push(new Promise(function(i){var s=null,r=function t(){s&&clearTimeout(s),e.removeEventListener("load",t,!1),e.removeEventListener("error",o,!1),i()};function o(){"LINK"===e.tagName&&"stylesheet"===e.getAttribute("rel")?console.error("FATAL: failed to load stylesheet: "+n.originalUrl(e.getAttribute("href"))):console.warn("Failed to load "+e.tagName+" asset: "+n.originalUrl(e.src||e.href||e.srcset)),r()}e.addEventListener("load",r,!1),e.addEventListener("error",o,!1),s=setTimeout(function(){s=null,o()},"IFRAME"===e.tagName?2e3:45e3),"IFRAME"===e.tagName||t.initialLoad||i()}))},t.forget=function(e){var t;if(this.idEl.delete(e.id),e.c)for(t=0;t<e.c.length;t++)this.forget(e.c[t])},e}(),V=function(){function e(){}var t=e.prototype;return t.deserializeInput=function(e,t){var i=t.t.toUpperCase()||"TEXT";"TEXTAREA"===t.n||"INPUT"===t.n&&"SELECT"!==i&&"CHECKBOX"!==i&&"RADIO"!==i?this.deserializeTextBox(e,t):"SELECT"===t.n?t.m?this.deserializeSelectMultiple(e,t):this.deserializeSelectSingle(e,t):"INPUT"!==t.n||"CHECKBOX"!==i&&"RADIO"!==i?console.error("unimplemented input deserialize:",e,t):this.deserializeCheckbox(e,t)},t.deserializeTextBox=function(e,t){e.value=t.v,!t.cs||0===t.cs&&0===t.ce||this.moveInputCaret(e,{s:t.cs,e:t.ce})},t.deserializeSelectSingle=function(e,t){e.selectedIndex=t.s},t.deserializeSelectMultiple=function(e,t){for(var i=0;i<e.length;i++){e.item(i).selected=t.so.indexOf(i)>-1}},t.deserializeCheckbox=function(e,t){e.checked=t.ch},t.focusBlurInput=function(e,t){t.v?e.focus&&e.focus():e.blur&&e.blur()},t.moveInputCaret=function(e,t){"COLOR"!==t.t&&e.setSelectionRange&&e.setSelectionRange(t.s,t.e)},t.pressKey=function(e,t){var i=e.value||"",n=t.s,s=i.length-(t.e||0);e.value=i.substr(0,n)+(t.v||"")+i.substr(s)},e}(),F=function(){function n(e,n){this.window=n,this.iframeEl=e,this.domreplay=new B(n.document.documentElement),this.keyboard=new V(this.domreplay),this.viewportSize={},this.scrollPos=t.getScroll(n),this.handlers={},this.handlers[i.NODE_ADDED]=this.addNode.bind(this),this.handlers[i.NODE_MOVED]=this.moveNode.bind(this),this.handlers[i.NODE_REMOVED]=this.removeNode.bind(this),this.handlers[i.CHAR_DATA]=this.updateCharData.bind(this),this.handlers[i.ATTR_MODIFIED]=this.modifyAttr.bind(this),this.handlers[i.INPUT_SERIALIZE]=this.deserializeInput.bind(this),this.handlers[i.FOCUS_BLUR]=this.focusBlurInput.bind(this),this.handlers[i.CARET_INFO]=this.moveInputCaret.bind(this),this.handlers[i.KEY_PRESS]=this.pressKey.bind(this),this.handlers[i.DOC_SIZE]=this.resizeDoc.bind(this),this.handlers[i.FRAME_SIZE]=this.resizeFrame.bind(this),this.handlers[i.FRAME_SCROLL]=this.scrollFrame.bind(this),this.handlers[i.SCROLL_EL]=this.scrollElement.bind(this)}var s=n.prototype;return s.getElement=function(e){return this.domreplay.get(e)},s.dispatch=function(e){var t=this.handlers[e.e];return t?t(e)||Promise.resolve():(console.error("Unhandled event type:",e),Promise.resolve())},s.load=function(e,t){return this.scrollPos=t,e?(this.domreplay.import(e),this.fixScrollPosAfter(this.domreplay.waitForLoad())):this.showPageNotRecorded()},s.showPageNotRecorded=function(){var e=document.createElement("body");return e.innerHTML="<div>Page Not Recorded</div>",e.style.width="100%",e.style.height="100vh",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.backgroundColor="#fff",e.style.color="#555",e.style.overflow="hidden",e.style.fontSize="24px",e.style.margin="0",this.window.document.documentElement.appendChild(e),Promise.resolve()},s.setScrollPos=function(i){i||(i=this.scrollPos);var n=t.getScroll(this.window);n.x===i.x&&n.y===i.y||(t.setScroll(this.window,i.x,i.y),this.scrollPos=e.ext({},i))},s.fixScrollPosAfter=function(e){var t=this;return e.then(function(){t.setScrollPos()})},s.addNode=function(e){if(e.d.tree){try{this.domreplay.insert(e.d.idx,e.d.tree)}catch(t){console.error(t)}return this.fixScrollPosAfter(this.domreplay.waitForLoad())}console.error("Attempt to add null node:",e)},s.moveNode=function(e){return this.domreplay.move(e.d.id,e.d.p,e.d.idx),this.fixScrollPosAfter(this.domreplay.waitForLoad())},s.removeNode=function(e){return this.domreplay.remove(e.d.id),this.fixScrollPosAfter(this.domreplay.waitForLoad())},s.updateCharData=function(e){return this.domreplay.updateCharData(e.d.id,e.d.v),this.fixScrollPosAfter(this.domreplay.waitForLoad())},s.modifyAttr=function(e){return this.domreplay.modifyAttr(e.d.id,e.d.attr,e.d.val),this.fixScrollPosAfter(this.domreplay.waitForLoad())},s.scrollFrame=function(e){this.setScrollPos(e.p)},s.scrollElement=function(e){var t=this.domreplay.get(e.d.id);t?(t.scrollLeft=e.d.x,t.scrollTop=e.d.y):console.error("scrollElement on unknown element",e.d.id)},s.resizeFrame=function(e){this.iframeEl&&(this.iframeEl.width=e.d.w,this.iframeEl.height=e.d.h)},s.resizeDoc=function(){},s.deserializeInput=function(e){var t=this.domreplay.get(e.d.id);t?this.keyboard.deserializeInput(t,e.d):console.error("deserializeInput on unknown element",e.d.id)},s.focusBlurInput=function(e){var t=this.domreplay.get(e.d.id);t?this.keyboard.focusBlurInput(t,e.d):console.error("focusBlurInput on unknown element",e.d.id)},s.moveInputCaret=function(e){var t=this.domreplay.get(e.d.id);t?this.keyboard.moveInputCaret(t,e.d):console.error("moveInputCaret on unknown element",e.d.id)},s.pressKey=function(e){var t=this.domreplay.get(e.d.id);t?this.keyboard.pressKey(t,e.d):console.error("pressKey on unknown element",e.d.id)},n}(),G=function(){function e(e,t,n,s,r){this.events=e,this.animWin=t,this.domWin=n,this.mouse=s,this.viewport=r,this.eventIndex=0,this.timeIndex=0,this.frames={0:new F(null,this.domWin)},this.cssmod=new L(r),this.handlers={},this.handlers[i.DOM_MODIFICATIONS]=this.modifyDOM.bind(this),this.handlers[i.PAGE_MARKER]=this.markPage.bind(this),this.handlers[i.PAGE_VISIBLE]=this.changePageVisible.bind(this),this.handlers[i.MOUSE_MOVE]=this.moveMouse.bind(this),this.handlers[i.WINDOW_MOUSEOUT_MOUSEENTER]=this.mouseEnterLeave.bind(this),this.handlers[i.MOUSE_CLICK]=this.clickMouse.bind(this),this.handlers[i.TOUCH]=this.touch.bind(this),this.handlers[i.MOUSE_DOWN]=this.mouseDown.bind(this),this.handlers[i.MOUSE_UP]=this.mouseUp.bind(this),this.handlers[i.ORIENTATION]=this.orientate.bind(this),this.handlers[i.ORIENTATION_CHANGE]=this.changeViewportOrientation.bind(this),this.handlers[i.ZOOM]=this.zoomViewport.bind(this),this.handlers[i.FRAME_SCROLL]=this.scrollViewport.bind(this),this.handlers[i.FRAME_SIZE]=this.resizeViewport.bind(this),this.handlers[i.SKIPTIME]=this.skipTime.bind(this),this.handlers[i.ASSET_ERROR]=this.assetError.bind(this),this.handlers[i.PAGE_ERROR]=this.pageError.bind(this),this.handlers[i.JAVASCRIPT_ERROR]=this.pageError.bind(this),this.handlers[i.NOT_RECORDED]=this.notRecorded.bind(this)}var t=e.prototype;return t.load=function(e,t){var i=this;this.viewport.update(t);var n={x:t.vx,y:t.vy};return this.frames[0].load(e,n).then(function(){return i.cssmod.updatedDOM(i.domWin.document)})},t.getCurrentEvent=function(){return this.events[this.eventIndex]},t.playNextEvent=function(){if(this.isDone())return Promise.resolve();var e=this.getCurrentEvent();return this.eventIndex++,this.isDone()||(this.timeIndex+=this.getCurrentEvent().td),this.dispatch(e).catch(function(e){console.error(e,e.stack)})},t.isDone=function(){return this.eventIndex>=this.events.length},t.timeToSkip=function(){return this.getCurrentEvent().e===i.SKIPTIME?this.getCurrentEvent().d.i:0},t.dispatch=function(e){var t=this.handlers[e.e];return t?t(e)||Promise.resolve():this.frames[e.d.ctx]?this.frames[e.d.ctx].dispatch(e):(console.error("Unhandled event type:",e),Promise.resolve())},t.markPage=function(e){if(0!==e.d.ctx)return this.iframeIntro(e);this.cssmod.mobile=e.d.mobile},t.iframeIntro=function(e){var t=this,i=e.d.ctx;if(this.frames[e.d.parent]){var n=this.frames[e.d.parent].getElement(i);if(n)if("IFRAME"===n.nodeName.toUpperCase()){if(n.width=e.d.lw,n.height=e.d.lh,this.frames[i]=new F(n,n.contentWindow),e.d.doc){for(var s=n.contentWindow.document.documentElement;s.childNodes.length;)s.removeChild(s.childNodes[0]);return this.frames[i].load(e.d.doc,e.d.scroll).then(function(){t.cssmod.updatedDOM(n.contentWindow.document)})}}else console.error("iframe intro on a non-iframe!",n);else console.error("Unable to find iframe element for",i,e)}else console.error("Unable to find parent frame for iframe",i,e)},t.modifyDOM=function(e){var t,i,n,s=this,r=[];if(!e.d.length)return console.error("Received empty DOM_MODIFICATIONS event!"),Promise.resolve();for(t=0;t<e.d.length;t++)i=e.d[t],this.frames[i.d.ctx]?(n=this.frames[i.d.ctx].window.document,r.push(this.frames[i.d.ctx].dispatch(i))):console.error("Unknown frame:",i.d.ctx,i);return Promise.all(r).then(function(){s.cssmod.updatedDOM(n),s.viewport.update({})})},t.moveMouse=function(e){this.mouse.setVisible(!0),this.mouse.setPos(e.p.x,e.p.y,e.spline)},t.mouseEnterLeave=function(e){this.mouse.setVisible(e.d.v)},t.clickMouse=function(e){this.mouse.click(e.p)},t.touch=function(e){switch(e.d.et){case"start":case"move":this.mouse.touchUpdate(e.d.ts);break;case"end":e.d.ts.length<1?this.mouse.touchEnd():this.mouse.touchUpdate(e.d.ts);break;case"cancel":case"leave":console.log("not sure what this means touch",e.d.et)}},t.mouseDown=function(){this.mouse.mouseDown()},t.mouseUp=function(){this.mouse.mouseUp()},t.orientate=function(){},t.changeViewportOrientation=function(e){this.viewport.update({vw:e.d.vw,vh:e.d.vh,lw:e.d.lw,lh:e.d.lh})},t.zoomViewport=function(e){this.viewport.update({vw:e.d.vw,vh:e.d.vh,lw:e.d.lw,lh:e.d.lh})},t.resizeViewport=function(e){if(0!==e.d.ctx)return this.frames[e.d.ctx].dispatch(e);this.viewport.update({vw:e.d.vw,vh:e.d.vh,lw:e.d.w,lh:e.d.h})},t.scrollViewport=function(e){var t=this;return this.frames[e.d.ctx].dispatch(e).then(function(){0===e.d.ctx&&t.viewport.update({vx:e.p.x,vy:e.p.y})})},t.changePageVisible=function(){},t.skipTime=function(){},t.assetError=function(e){console.warn("Error loading asset on recorded page: "+(e.d.a.src||e.d.a.href))},t.pageError=function(e){console.warn("Error on recorded page: "+(e.d.st||e.d.v))},t.notRecorded=function(){return new Promise(function(e){setTimeout(e,5e3)})},e}(),z=function(){function i(e,t,i,n){this.sessionData=n,this.preplayer=!!i.uploadPort,this.loaded=!1,this.autoplay=t,this.pageNumber=e,this.frameTimer=null,this.watchdogTimer=null,this.capture=new M(i),this.iframe=null,this.busyEvents=0,this.preloaded=!1,this.cachedPageData={},this.ui=new D(this)}var s=i.prototype;return s.initialize=function(){this.ui.initialize(),this.ui.updatePageTitle(this.sessionData),this.iframe=this.ui.iframe},s.signalMessage=function(){var t=Array.prototype.slice.call(arguments,0);e.nextTick(function(){console.log("PPCMD:"+btoa(JSON.stringify({cmds:t})))})},s.load=function(){var e=this;return this.paused=!0,this.loaded=!1,this.playbackFinished=!1,this.timeOffset=0,this.timeStart=0,this.ui.loading().then(function(){return e.loadThisPageData()}).then(function(){if(!e.preloaded)return e.preloaded=!0,e.preloadAll()}).then(function(){return e.ui.clearPlaybackIframe(e.data)}).then(function(){return e.loadWorker()}).then(function(){return e.capture.setup()}).then(function(){return e.finishLoading()}).then(function(){return e.ui.loadingDone()}).catch(function(e){console.error(e.stack)})},s.loadThisPageData=function(){var e=this;return this.loadPageData(this.sessionData).then(function(t){e.data=t}).catch(function(){e.data=null})},s.loadPageData=function(e){var i=this;return this.cachedPageData[e.page_number]?Promise.resolve(this.cachedPageData[e.page_number]):new Promise(function(n,s){(new t.AjaxTransport).send({method:"GET",url:"/replay/page_data",data:e,success:function(t){var s=JSON.parse(t);i.cachedPageData[e.page_number]=s,n(s)},failure:function(e,t){s(new Error("Failed to fetch pageData: "+t[0]))}})})},s.preloadAll=function(){for(var t=this,i=[],s=this.sessionData.page_number+1;s<this.data.totalPageCount;s++)i.push(this.loadPageData(e.ext({},this.sessionData,{page_number:s})));return Promise.all(i).then(function(e){e.unshift(t.data);var i=new n;return i.onProgress.subscribe(function(e){t.ui.updateProgress(e)},!1,!0),i.preloadAll(e)})},s.loadWorker=function(){this.viewport&&this.viewport.dispose(),this.viewport=new N(this.iframe),this.data.url.indexOf("//online.citi.com")>-1&&(this.viewport.disablePositionFixedFix=!0),this.mouse&&this.mouse.dispose(),this.mouse=new A(this.viewport,window,this.iframe);var e=window,t=this.iframe.contentWindow;this.worker=new G(this.data.events,e,t,this.mouse,this.viewport);var i={dw:this.data.deviceSize.width,dh:this.data.deviceSize.height,lw:this.data.initialFrameSize.width||640,lh:this.data.initialFrameSize.height||480,vw:this.data.initialViewportSize.width||640,vh:this.data.initialViewportSize.height||480,vx:this.data.initialScrollPosition.x,vy:this.data.initialScrollPosition.y};return this.worker.load(this.data.initialDOM,i,this.data.knownAssetsProxied)},s.finishLoading=function(){this.loaded=!0,this.resetWatchdog(6e5),this.autoplay?(this.videoSyncUp("pagescenestart"),e.nextTick(this.resume.bind(this))):this.ui.notify("Waiting for left-click to start!")},s.hasMorePages=function(){return this.pageNumber+1<this.data.totalPageCount},s.advancePage=function(){var e=this;return this.hasMorePages()?(this.ui.notify("Navigating to page "+(this.pageNumber+1)),(this._pausePromise||Promise.resolve()).then(function(){return e._pausePromise=null,e.ui.advancePage(e.pageNumber)}).then(function(){var t=window.location.toString();t.indexOf("page_number=")>-1?t=t.replace("page_number="+e.pageNumber,"page_number="+(e.pageNumber+1)):t+="&page_number="+(e.pageNumber+1),window.history.pushState({},"",t),e.pageNumber+=1,e.sessionData.page_number=e.pageNumber,e.ui.updatePageTitle(e.sessionData)}).then(this.load.bind(this))):(this.ui.notify("No more pages"),Promise.resolve())},s.getTimeIndex=function(){return this.paused?this.timeOffset:t.now()-this.timeStart+this.timeOffset},s.pause=function(){if(!this.paused)return this.paused=!0,this.frameTimer&&(clearTimeout(this.frameTimer),this.frameTimer=null),this.timeOffset+=t.now()-this.timeStart,this.ui.pause(),this.stopWatchdog(),this.capture.pause()},s.videoSyncUp=function(e){e=e||"SYNC",this.signalMessage({command:e,videoTimeIndex:Math.round(this.capture.getDuration()),playbackTime:this.getTimeIndex(),eventIndex:this.eventIndex,pageNumber:this.pageNumber})},s.resume=function(){this.paused&&(this.paused=!1,this.timeStart=t.now(),this.capture.resume().then(this.playNextEvent.bind(this)),this.ui.resume())},s.playNextEvent=function(){var e=this;if(!this.paused){if(this.getTimeIndex()<this.worker.timeIndex)return this.busyEvents=0,void this.awaitNextFrame();if(this.busyEvents++,this.worker.isDone())this.finishPlayback();else{var t,i=this.worker.timeToSkip();i>0?(this.ui.notify("Skipping "+i+" ms"),t=this.ui.skipTime(i),(i-=o.overlayShadeSkipTime)<0&&(i=0)):t=Promise.resolve(),t.then(function(){return e.timeOffset+=i,e.worker.playNextEvent()}).then(function(){e.busyEvents>=10?(e.busyEvents=0,window.requestAnimationFrame(e.playNextEvent.bind(e))):e.playNextEvent()})}}},s.stopWatchdog=function(){this.watchdogTimer&&(clearTimeout(this.watchdogTimer),this.watchdogTimer=null)},s.resetWatchdog=function(e){var t=this;this.stopWatchdog(),this.watchdogTimer=setTimeout(function(){return t.tripWatchdog()},(e||0)+12e4)},s.tripWatchdog=function(){throw this.capture.stop(),this.ui.notify("FATAL: watchdog tripped!"),new Error("FATAL: watchdog trippped!")},s.awaitNextFrame=function(){var e=this.worker.timeIndex-this.getTimeIndex();e<0&&(e=0),this.resetWatchdog(e),this.frameTimer=setTimeout(this.playNextEvent.bind(this),e)},s.finishPlayback=function(){this.videoSyncUp(),this._pausePromise=this.pause(),this.hasMorePages()||(this.ui.notify("Playback finished"),this.ui.endOfPlayback()),this.playbackFinished=!0,this.videoSyncUp("pagesceneend"),this.autoplay&&this.hasMorePages()?this.advancePage():this.capture.stop()},i}(),W=function(){function e(e){console.log("rp: starting replay pose mode"),this.sessionData=e,this.cachedPageData={}}var t=e.prototype;return t.load=function(){var e=this;return Promise.resolve().then(function(){return console.log("loading page data"),e.loadThisPageData()}).then(function(){return e.preloadAll()}).then(function(){return e.clearDOM()}).then(function(){return e.loadInitialDOM()}).then(function(){return e.signalReadyForPicture()}).catch(function(e){console.error(e.stack)})},t.preloadAll=function(){return console.log("preloading assets"),(new n).preloadAll([this.data])},t.clearDOM=function(){for(var e=window.document.documentElement.children;e.length>0;)window.document.documentElement.removeChild(e[0])},t.loadInitialDOM=function(){return this.domreplay=new B(window.document.documentElement),this.domreplay.initialLoad=!1,this.domreplay.import(this.data.initialDOM),console.log("waiting for the DOM to completely load"),this.domreplay.waitForLoad()},t.signalReadyForPicture=function(){console.log("ready for picture")},e}();W.prototype.loadThisPageData=z.prototype.loadThisPageData,W.prototype.loadPageData=z.prototype.loadPageData;var Q,Y=new t.Browser;e.winReady(function(){Y.ready.subscribe(function(){console.warn("rp: player starting v"+e.globalConfig.codeVer);var t=JSON.parse(atob(e.embedAttrs["data-sessioninfo"]));if("true"===(e.getParam("pose")||"false")){var i=new W(t);return Q=i,void e.nextTick(i.load.bind(i))}var n=(e.getParam("autoplay")||"true").toLowerCase();n="true"==n;var s={vwidth:parseInt(e.getParam("vwidth")||"1280",10),vheight:parseInt(e.getParam("vheight")||"720",10),framerate:parseInt(e.getParam("framerate")||"30",10),bitrate:parseInt(e.getParam("bitrate")||"2500000",10),uploadPort:parseInt(e.getParam("uploadport")||"0",10)};window.player=Q=new z(t.page_number,n,s,t),Q.initialize(),e.nextTick(Q.load.bind(Q))},!0,!0)})});
